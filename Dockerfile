# ------------------------------
ARG CACHEBUST=1
# 1️⃣ Base Image
# ------------------------------
FROM openjdk:21-jdk-slim AS builder

# ------------------------------
# 2️⃣ 작업 디렉토리 생성
# ------------------------------
WORKDIR /app

# ------------------------------
# 3️⃣ JAR 빌드 파일 복사
#  - Gradle 빌드 후 build/libs/*.jar 파일이 생겨야 함
# ------------------------------
COPY build/libs/*.jar app.jar

# ------------------------------
# 4️⃣ 실행 포트 (Spring Boot 기본 포트)
# ------------------------------
EXPOSE 8080

# ------------------------------
# 5️⃣ 애플리케이션 실행 명령어
# ------------------------------
ENTRYPOINT ["java", "-jar", "app.jar"]
